erDiagram
    %% ===== ユーザー =====
    USERS {
        BIGINT id PK
        VARCHAR name
        VARCHAR email
        VARCHAR password_hash
        DATETIME created_at
        DATETIME updated_at
    }

    %% ===== 収入系 =====
    FIXED_INCOMES {
        BIGINT id PK
        BIGINT user_id FK
        VARCHAR name
        DECIMAL amount
        TINYINT pay_day
        TEXT memo
        DATETIME created_at
    }

    SIDE_INCOMES {
        BIGINT id PK
        BIGINT user_id FK
        VARCHAR source
        DECIMAL amount
        CHAR month
        DATETIME created_at
    }

    INCOME_ADJUSTMENTS {
        BIGINT id PK
        BIGINT user_id FK
        ENUM category
        DECIMAL amount
        VARCHAR reason
        CHAR month
        DATETIME created_at
    }

    %% ===== 支出系 =====
    FIXED_COSTS {
        BIGINT id PK
        BIGINT user_id FK
        VARCHAR name
        DECIMAL amount
        TINYINT payment_date
        TEXT memo
        DATETIME created_at
    }

    VARIABLE_COSTS {
        BIGINT id PK
        BIGINT user_id FK
        VARCHAR category
        DECIMAL amount
        DATE date
        TEXT memo
        DATETIME created_at
    }

    %% ===== 目標系 =====
    WANTS {
        BIGINT id PK
        BIGINT user_id FK
        VARCHAR name
        DECIMAL target_amount
        DECIMAL monthly_saving
        DATETIME created_at
    }

    %% ===== 関係 =====
    USERS ||--o{ FIXED_INCOMES : "固定収入"
    USERS ||--o{ SIDE_INCOMES : "副業収入"
    USERS ||--o{ INCOME_ADJUSTMENTS : "本業調整額"
    USERS ||--o{ FIXED_COSTS : "固定費"
    USERS ||--o{ VARIABLE_COSTS : "変動費"
    USERS ||--o{ WANTS : "目標貯金・欲しいもの"

    %% ===== 履歴テーブルの補足 =====
    %% HISTORY_FIXED_INCOME, HISTORY_SIDE_INCOME, HISTORY_INCOME_ADJUSTMENTS, HISTORY_VARIABLE_COSTS
    %% は現行テーブルと同構造で、月次スナップショット用
